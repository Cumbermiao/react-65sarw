{"version":3,"sources":["view/home/index.jsx","view/order/create/index.jsx","view/order/detail/form.jsx","view/order/detail/log.jsx","view/order/detail/index.jsx","view/order/rate/index.jsx","config/dingtalk.js","utils/storage.js","api/base.js","App.js","index.js"],"names":["Card","props","data","className","title","code","createPersonName","createTime","fill","width","height","Home","useState","autoFlag","createPersonId","designateId","designateName","estimateId","estimateName","finishTime","handlePersonName","haveRemoved","id","reviewId","reviewName","state","todoPersonId","type","list","setList","history","useHistory","placeholder","onSearch","params","console","log","onChange","onEnter","onExit","searchDelay","style","borderBottom","activeKey","label","value","map","item","Item","loading","onLoad","push","slice","class","idx","onClick","Count","TextareaField","RequiredLabel","color","children","showToast","options","Toast","show","CreateOrder","setTitle","system","setSystem","emergency","setEmergency","influence","setInfluence","severity","setSeverity","desc","setDesc","photos","setPhotos","List","errMsg","layout","str","onSelect","val","minRows","total","length","H5","required","max","maxUpload","name","url","photoList","Dialog","confirm","content","onConfirm","onCancel","DetailForm","result","setResult","Head","src","href","download","LogItem","nodeName","username","handleMethod","OrderLog","handleTime","active","OrderDetail","Rate","rate1","setRate1","rate2","setRate2","rate3","setRate3","prop","size","location","showLabel","DING_TALK","instance","axios","create","baseURL","timeout","getCode","CancelToken","VConsole","Promise","resolve","reject","dd","permission","requestAuthCode","corpId","_config","onSuccess","info","Cookies","set","onError","err","warn","login","then","method","getLogin","res","catch","App","useEffect","navigation","onFail","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b2e03fa9.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { SearchBar, Tab, ScrollList, InfiniteScroll } from 'saltui';\r\nimport IconRight from 'salt-icon/lib/DirectionRight';\r\nimport './index.scss';\r\n\r\nfunction Card(props) {\r\n  const { data } = props;\r\n  return (\r\n    <div className=\"list-item\">\r\n      <div className=\"item-header\">\r\n        <big>{data.title}</big>\r\n        <i>{data.code}</i>\r\n      </div>\r\n      <div className=\"item-body\">\r\n        <div className=\"content\">\r\n          <p>业务系统：{data.createPersonName}</p>\r\n          <p>创建时间：{data.createTime}</p>\r\n        </div>\r\n        <IconRight fill=\"#ababab\" width=\"0.34rem\" height=\"0.34rem\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Home(props) {\r\n  const tabList = [\r\n    { label: '全部', value: 'all' },\r\n    { label: '今天', value: '1' },\r\n    { label: '昨天', value: '2' },\r\n    { label: '近7天', value: '3' }\r\n  ];\r\n\r\n  const order = {\r\n    autoFlag: 0,\r\n    code: 'IN20210011',\r\n    createPersonId: 1,\r\n    createPersonName: '系统管理员',\r\n    createTime: '2021-06-11 10:59:01',\r\n    designateId: 30,\r\n    designateName: '',\r\n    estimateId: null,\r\n    estimateName: null,\r\n    finishTime: '2021-06-11 11:16:49',\r\n    handlePersonName: '系统管理员',\r\n    haveRemoved: '0',\r\n    id: 1756,\r\n    reviewId: null,\r\n    reviewName: null,\r\n    state: '5',\r\n    title: '故障报修故障报修故障报修故障报修故障报修故障报修故障报修',\r\n    todoPersonId: '',\r\n    type: 1\r\n  };\r\n  const [list, setList] = useState([order]);\r\n  const history = useHistory();\r\n\r\n  const onLoad = () => {\r\n    console.log('onload');\r\n    list.push({\r\n      autoFlag: 0,\r\n      code: 'IN20210011',\r\n      createPersonId: 1,\r\n      createPersonName: '系统管理员',\r\n      createTime: '2021-06-11 10:59:01',\r\n      designateId: 30,\r\n      designateName: '',\r\n      estimateId: null,\r\n      estimateName: null,\r\n      finishTime: '2021-06-11 11:16:49',\r\n      handlePersonName: '系统管理员',\r\n      haveRemoved: '0',\r\n      id: 1756,\r\n      reviewId: null,\r\n      reviewName: null,\r\n      state: '5',\r\n      title: '故障报修',\r\n      todoPersonId: '',\r\n      type: 1\r\n    });\r\n    setList(list.slice(0));\r\n  };\r\n\r\n  const onSearch = params => {\r\n    console.log('onSearch', params);\r\n  };\r\n\r\n  const onChange = params => {\r\n    console.log('onChange', params);\r\n  };\r\n\r\n  const onEnter = params => {\r\n    console.log('onEnter', params);\r\n  };\r\n\r\n  const onExit = params => {\r\n    console.log('onExit', params);\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-home\">\r\n      <SearchBar\r\n        className=\"searchbar\"\r\n        placeholder=\"事件搜索\"\r\n        {...{ onSearch, onChange, onEnter, onExit, searchDelay: 500 }}\r\n        style={{ borderBottom: 'none' }}\r\n      />\r\n      <Tab className=\"home-tab\" activeKey={'all'}>\r\n        {tabList.map(item => (\r\n          <Tab.Item title={item.label} key={item.value} />\r\n        ))}\r\n      </Tab>\r\n\r\n      <InfiniteScroll loading={false} onLoad={onLoad}>\r\n        <div class=\"list-container\">\r\n          <div>\r\n            {list.map((data,idx) => (\r\n              <Card key={idx} data={data} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </InfiniteScroll>\r\n\r\n      <div className=\"add-btn\" onClick={() => history.push('/order/create')}>\r\n        <i className=\"plus icon\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport './index.scss';\r\n\r\nimport {\r\n  Group,\r\n  TextField,\r\n  Field,\r\n  CascadeSelectField,\r\n  TextareaField,\r\n  PhotoField,\r\n  Button,\r\n  Dialog,\r\n  Toast\r\n} from \"saltui\";\r\n\r\nconst { Count } = TextareaField;\r\n\r\nfunction RequiredLabel(props) {\r\n  const fill = props.fill || \"#f266a9\";\r\n  return (\r\n    <span>\r\n      <i style={{ color: fill }}>*</i> {props.children}\r\n    </span>\r\n  );\r\n}\r\n\r\nRequiredLabel.propTypes = {\r\n  fill: PropTypes.string,\r\n};\r\n\r\nconst showToast = options => {\r\n  Toast.show(options)\r\n}\r\n\r\nexport default function CreateOrder() {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [system, setSystem] = useState([]);\r\n  const [emergency, setEmergency] = useState([]);\r\n  const [influence, setInfluence] = useState([]);\r\n  const [severity, setSeverity] = useState([]);\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [photos, setPhotos] = useState([]);\r\n  const systemList = [\r\n    {\r\n      label: \"测试1\",\r\n      value: \"1\",\r\n      children: [\r\n        { label: \"测试1-1\", value: \"1-1\" },\r\n        { label: \"测试1-2\", value: \"1-2\" },\r\n      ],\r\n    },\r\n    {\r\n      label: \"测试2\",\r\n      value: \"2\",\r\n      children: [\r\n        { label: \"测试2-1\", value: \"2-1\" },\r\n        { label: \"测试2-2\", value: \"2-2\" },\r\n      ],\r\n    },\r\n  ];\r\n  const influenceList = [\r\n    { label: \"低度影响\", value: \"1\" },\r\n    { label: \"中度影响\", value: \"2\" },\r\n    { label: \"高度影响\", value: \"3\" },\r\n  ]\r\n  const emergencyList = [\r\n    { label: \"普通\", value: \"1\" },\r\n    { label: \"急\", value: \"2\" },\r\n    { label: \"紧急\", value: \"3\" },\r\n  ];\r\n  const severityList = [\r\n    { label: 'Ⅳ级事件', value: '1'},\r\n    { label: 'Ⅲ级事件', value: '2'},\r\n    { label: 'Ⅱ级事件', value: '3'},\r\n    { label: 'Ⅰ级事件', value: '4'},\r\n  ]\r\n\r\n  const dobuleCheck =() =>{\r\n    Dialog.confirm({\r\n      content: '确认提交吗',\r\n      onConfirm() {\r\n        console.log('alert confirm');\r\n        showToast({\r\n          type: 'success',\r\n          content: '提交成功'\r\n        })\r\n      },\r\n      onCancel() {\r\n        console.log('cancel')\r\n        showToast({\r\n          type: 'error',\r\n          content: '提交失败'\r\n        })\r\n      }\r\n    })\r\n  }\r\n  return (\r\n    <div className=\"page-create-order\">\r\n      <Group.List>\r\n        <TextField\r\n          label={<RequiredLabel>标题</RequiredLabel>}\r\n          placeholder=\"请输入\"\r\n          errMsg=\"rr\"\r\n          layout=\"v\"\r\n          value={title}\r\n          onChange={(str) => setTitle(str)}\r\n        />\r\n      </Group.List>\r\n      <Group.List>\r\n        <CascadeSelectField\r\n          label={<RequiredLabel>业务系统</RequiredLabel>}\r\n          options={systemList}\r\n          value={system}\r\n          layout=\"v\"\r\n          onSelect={(val) => setSystem(val)}\r\n        />\r\n      </Group.List>\r\n      <Group.List>\r\n        <CascadeSelectField\r\n          label={<RequiredLabel>紧急程度</RequiredLabel>}\r\n          options={emergencyList}\r\n          value={emergency}\r\n          layout=\"v\"\r\n          onSelect={(val) => setEmergency(val)}\r\n        />\r\n      </Group.List>\r\n      <Group.List>\r\n        <CascadeSelectField\r\n          label={<RequiredLabel>影响范围</RequiredLabel>}\r\n          options={influenceList}\r\n          value={influence}\r\n          layout=\"v\"\r\n          onSelect={(val) => setInfluence(val)}\r\n        />\r\n      </Group.List>\r\n      <Group.List>\r\n        <CascadeSelectField\r\n          label={<RequiredLabel>严重等级</RequiredLabel>}\r\n          options={severityList}\r\n          value={severity}\r\n          layout=\"v\"\r\n          onSelect={(val) => setSeverity(val)}\r\n        />\r\n      </Group.List>\r\n      <Group.List>\r\n        <TextareaField\r\n          label={<RequiredLabel>问题描述</RequiredLabel>}\r\n          value={desc}\r\n          placeholder=\"请输入\"\r\n          minRows={3}\r\n          onChange={(val) => setDesc(val)}\r\n          layout=\"v\"\r\n        >\r\n          <Count total={140} length={desc.length} />\r\n        </TextareaField>\r\n      </Group.List>\r\n      <Group.List>\r\n        <PhotoField.H5\r\n          label=\"图片\"\r\n          placeholder=\"请选择图片\"\r\n          required\r\n          max={4}\r\n          maxUpload={9}\r\n          name=\"file\"\r\n          url=\"http://eternalsky.me:8122/file/upload\"\r\n          photoList={photos}\r\n          onChange={(list) => setPhotos(list)}\r\n        />\r\n      </Group.List>\r\n\r\n      <div className='submit-btn'>\r\n        <Button type=\"primary\" onClick={dobuleCheck}>提交</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Group, Field, CascadeSelectField, Button } from \"saltui\";\r\n\r\nexport default function DetailForm(props) {\r\n  const [result, setResult] = useState([]);\r\n  const formItems = [\r\n    { label: \"标题\", value: \"标题xxxx\" },\r\n    { label: \"业务系统\", value: \"系统一\" },\r\n    { label: \"节点名称\", value: \"验收节点\" },\r\n    { label: \"紧急程度\", value: \"低\" },\r\n    { label: \"影响范围\", value: \"中\" },\r\n    {\r\n      label: \"问题描述\",\r\n      value: \"问题描述文字较多XXXXXX XXXXXXXXXXXXX XXXXXXX XXXXXXXX\",\r\n    },\r\n  ];\r\n\r\n  const results = [\r\n    { label: \"完全解决\", value: \"1\" },\r\n    { label: \"变通解决\", value: \"2\" },\r\n    { label: \"部分解决\", value: \"3\" },\r\n    { label: \"未能解决\", value: \"4\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"detail-form\">\r\n      <Group>\r\n        <Group.Head>事件上报</Group.Head>\r\n        {formItems.map((item) => (\r\n          <Group.List key={item.label}>\r\n            <Field label={item.label} layout=\"v\">\r\n              <p>{item.value}</p>\r\n            </Field>\r\n          </Group.List>\r\n        ))}\r\n        <Group.List>\r\n          <Field label=\"图片\" layout=\"v\">\r\n            <img src=\"http://10.3.7.242:8987/dtc/images/20210602/1622627567443.jpg\"></img>\r\n            <img src=\"http://10.3.7.242:8987/dtc/images/20210602/1622627567443.jpg\"></img>\r\n          </Field>\r\n        </Group.List>\r\n        <Group.List>\r\n          <Field label=\"附件\" layout=\"v\">\r\n            <p>\r\n              <a\r\n                href=\"http://10.3.7.242:8987/dtc/images/20210602/1622627567443.jpg\"\r\n                download\r\n              >\r\n                1622627567443.jpg\r\n              </a>\r\n            </p>\r\n            <p>\r\n              <a\r\n                href=\"http://10.3.7.242:8987/dtc/images/20210602/1622627567443.jpg\"\r\n                download\r\n              >\r\n                1622627567443.jpg\r\n              </a>\r\n            </p>\r\n          </Field>\r\n        </Group.List>\r\n      </Group>\r\n\r\n      <Group>\r\n        <Group.Head>事件确认</Group.Head>\r\n\r\n        <Group.List>\r\n          <CascadeSelectField\r\n            label=\"解决程度\"\r\n            options={results}\r\n            value={result}\r\n            layout=\"v\"\r\n            onSelect={(val) => setResult(val)}\r\n          />\r\n        </Group.List>\r\n      </Group>\r\n\r\n      <div className=\"submit-btn\">\r\n        <Button type=\"primary\">提交</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Timeline, Group } from \"saltui\";\r\n\r\nconst btns = {\r\n    label: '按钮',\r\n    arr: [\r\n      {\r\n        label: '提交',\r\n        type: 'button',\r\n        value: '1',\r\n        code: 'button',\r\n        desc: {\r\n          label: '说明',\r\n          content: '用户在处理流程时点击此按钮，将保存用户在此节点中对数据的更改，流程数据流转至后续节点。'\r\n        }\r\n      },\r\n      {\r\n        label: '通过',\r\n        type: 'button',\r\n        code: 'button',\r\n        value: '4',\r\n        desc: {\r\n          label: '说明',\r\n          content: '用户在处理流程时点击此按钮，将保存用户在此节点中对数据的更改，流程数据流转至后续节点。'\r\n        }\r\n      },\r\n      {\r\n        label: '回退',\r\n        type: 'button',\r\n        buttonType: 'danger',\r\n        code: 'button',\r\n        value: '5',\r\n        desc: {\r\n          label: '说明',\r\n          content: '开启后，用户在处理流程时点击此按钮，将保存用户在此节点中对数据的更改，同时流程退回到指定的节点中。'\r\n        }\r\n      },\r\n      {\r\n        label: '关闭',\r\n        type: 'button',\r\n        buttonType: 'plain',\r\n        code: 'button',\r\n        value: '6',\r\n        desc: {\r\n          label: '说明',\r\n          content: '开启后，用户在处理流程时点击此按钮，将取消用户在此节点中对数据的更改，页面返回上一节点。'\r\n        }\r\n      },\r\n      {\r\n        label: '暂存',\r\n        type: 'button',\r\n        code: 'button',\r\n        value: '2',\r\n        desc: {\r\n          label: '说明',\r\n          content: '用户在处理流程时点击此按钮，将保存用户在此节点中对数据的更改，流程不发生流转。暂存会将数据保存至数据库，触发字段「不允许重复值」校验。'\r\n        }\r\n      }\r\n    ]\r\n  }\r\n\r\nfunction LogItem(props){\r\n    const { nodeName, username, handleMethod } = props.data\r\n    return (\r\n        <div>\r\n            <b>{nodeName}</b>\r\n            <p>\r\n                {username}\r\n                {handleMethod}\r\n            </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function OrderLog(props) {\r\n\r\n    const logs = [\r\n        { nodeName: '人事主管报备', username: '管理员', handleTime: '2021-08-03 14:15:08', handleMethod:'提交'},\r\n        { nodeName: '主管审批', username: '管理员', handleTime: '2021-07-02 16:31:19', handleMethod:'通过'},\r\n        { nodeName: '提交请假', username: '管理员', handleTime: '2021-07-02 16:31:06', handleMethod:'提交'},\r\n    ]\r\n  return (\r\n    <div className=\"order-log\">\r\n      <Timeline>\r\n        {\r\n            logs.map((item,idx)=>(\r\n                <Timeline.Item  desc={item.handleTime} active={idx===0} key={item.handleTime}>\r\n                    <LogItem data={item} />\r\n                </Timeline.Item>\r\n            ))\r\n        }\r\n      </Timeline>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Tab } from 'saltui';\r\nimport OrderForm from './form'\r\nimport OrderLog from './log'\r\nimport './index.scss'\r\n\r\n\r\n\r\nexport default function OrderDetail(){\r\n    return (\r\n        <div>\r\n            <Tab activeKey=\"1\">\r\n                <Tab.Item title='表单详情' key=\"1\">\r\n                    <OrderForm />\r\n                </Tab.Item>\r\n                <Tab.Item title='流转日志' key=\"2\">\r\n                    <OrderLog />\r\n                </Tab.Item>\r\n            </Tab>\r\n        </div>\r\n    )\r\n}","import React, { useState } from \"react\";\r\nimport { RateField, Group, TextareaField } from \"saltui\";\r\n\r\nconst { Count } = TextareaField;\r\n\r\nexport default function Rate(props) {\r\n  const [rate1, setRate1] = useState(0);\r\n  const [rate2, setRate2] = useState(0);\r\n  const [rate3, setRate3] = useState(0);\r\n  const [desc, setDesc] = useState(\"\");\r\n\r\n  const prop = {\r\n    total: 5,\r\n    size: \"normal\",\r\n    location: \"down\",\r\n    label: \"总体评价\",\r\n    showLabel: true,\r\n    layout: 'v'\r\n  };\r\n  return (\r\n    <div className=\"page-order-detail\">\r\n      <Group.List>\r\n        <RateField\r\n          {...{ prop }}\r\n          value={rate1}\r\n          onChange={(val) => setRate1(val)}\r\n        ></RateField>\r\n      </Group.List>\r\n      <Group.List>\r\n        <RateField\r\n          {...{ prop }}\r\n          value={rate2}\r\n          onChange={(val) => setRate2(val)}\r\n        ></RateField>\r\n      </Group.List>\r\n      <Group.List>\r\n        <RateField\r\n          {...{ prop }}\r\n          value={rate3}\r\n          onChange={(val) => setRate3(val)}\r\n        ></RateField>\r\n      </Group.List>\r\n      <Group.List>\r\n        <TextareaField\r\n          label=\"评价描述\"\r\n          value={desc}\r\n          placeholder=\"请输入\"\r\n          minRows={3}\r\n          onChange={(val) => setDesc(val)}\r\n          layout=\"v\"\r\n        >\r\n          <Count total={140} length={desc.length} />\r\n        </TextareaField>{\" \"}\r\n      </Group.List>\r\n    </div>\r\n  );\r\n}\r\n","\r\nexport default {\r\n    corpId: \"ding3e787f7acd27d9debc961a6cb783455b\",\r\n    appKey: \"dingq7z4bzslox1otsx6\",\r\n    appSecret:\"Wzs6r95_McP-v_0aZaIU0eddkRVVFw27_QoGfJ5t-gt5wwXIokJBhF1CdBno-qfg\"\r\n}","export const DING_TALK = {\r\n    code: 'DING_CODE',\r\n    token: 'DING_TOKEN'\r\n}","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL:'/',\r\n    timeout: 60000\r\n})\r\n\r\nexport default instance\r\n\r\nexport const CancelToken = axios.CancelToken\r\n\r\n\r\nexport const login = code => instance({\r\n    method: 'POST',\r\n    url: `/login?authCode=${code}`\r\n})","import React, { useEffect } from 'react';\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport './style.css';\r\nimport Home from './view/home';\r\nimport CreateOrder from './view/order/create';\r\nimport OrderDetail from './view/order/detail'\r\nimport RatePage from './view/order/rate'\r\nimport * as dd from 'dingtalk-jsapi'\r\nimport _config from './config/dingtalk'\r\nimport VConsole from 'vconsole'\r\nimport Cookies from 'js-cookie';\r\nimport { DING_TALK } from './utils/storage'\r\nimport { getAccessToken } from './dingtalk'\r\nimport { login as getLogin } from './api/base'\r\n\r\nconst vConsole = new VConsole()\r\n\r\nconst alert = function (msg) {\r\n  dd.device.notification.alert({\r\n    message: msg,\r\n    title: \"提示\",//可传空\r\n    buttonName: \"确定\",\r\n    onSuccess: function () {\r\n    },\r\n    onFail: function (err) { }\r\n  }).catch((err) => {\r\n    window.alert(msg);\r\n  });\r\n}\r\n\r\nconst getCode = () => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      dd.ready(function () {\r\n        dd.runtime.permission.requestAuthCode({\r\n          corpId: _config.corpId, // 企业id\r\n          onSuccess: function (info) {\r\n            Cookies.set(DING_TALK.code, info.code)\r\n            console.log('get code success', info)\r\n            resolve(info.code)\r\n          },\r\n          onError: function (err) {\r\n            console.warn('get code error', err)\r\n          }\r\n        });\r\n      });\r\n    } catch (err) {\r\n      console.warn('error', err)\r\n      reject(err)\r\n    }\r\n  })\r\n\r\n}\r\n\r\nconst login = () => {\r\n  getCode().then(code=>{\r\n    return getLogin(code)\r\n  }).then(res=>{\r\n    console.log('login', res)\r\n  }).catch(err=>{\r\n    console.log('login err', err)\r\n  })\r\n  \r\n}\r\n\r\nconst setTitle = (title = '我的事件') => {\r\n  dd.biz.navigation.setTitle({\r\n    title,//控制标题文本，空字符串表示显示默认文本\r\n    onSuccess: function (result) { },\r\n    onFail: function (err) { }\r\n  }).catch(err => { console.log(err + '') });\r\n}\r\n\r\n\r\nexport default function App() {\r\n\r\n  useEffect(() => {\r\n    setTitle()\r\n  })\r\n\r\n  return (\r\n    <Router>\r\n      <button onClick={getCode}>getCode</button>\r\n      <button onClick={login}>login</button>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/order/create\">\r\n          <CreateOrder />\r\n        </Route>\r\n        <Route path=\"/order/detail\">\r\n          <OrderDetail />\r\n        </Route>\r\n        <Route path=\"/order/rate:id\">\r\n          <RatePage />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}